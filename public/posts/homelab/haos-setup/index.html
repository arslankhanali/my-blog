<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/my-blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=my-blog/livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>HomeLab: Home Assistant VM - Non-root deployment on Fedora | AK Blogs</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" /><meta property="og:url" content="http://localhost:1313/my-blog/posts/homelab/haos-setup/">
  <meta property="og:site_name" content="AK Blogs">
  <meta property="og:title" content="HomeLab: Home Assistant VM - Non-root deployment on Fedora">
  <meta property="og:description" content="Home Assistant is an open-source platform for smart home automation. It integrates with a wide range of devices and services, and allows powerful automation logic — all running locally on your own hardware.
Home Assistant OS (HAOS) is the official operating system for running Home Assistant as a virtual appliance. It includes everything needed: supervisor, OS, and the Home Assistant core.
This guide shows how to run HAOS inside a KVM virtual machine using libvirt on Fedora without requiring sudo to manage the VM — after an initial root configuration.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-04T23:55:00+10:00">
    <meta property="article:modified_time" content="2025-08-04T23:55:00+10:00">
    <meta property="article:tag" content="Homeassistant">
    <meta property="article:tag" content="Libvirt">
    <meta property="article:tag" content="Fedora">
      <meta property="og:see_also" content="http://localhost:1313/my-blog/posts/homelab/ansible-fedora/">
      <meta property="og:see_also" content="http://localhost:1313/my-blog/posts/homelab/terminal-zsh/">
      <meta property="og:see_also" content="http://localhost:1313/my-blog/posts/homelab/homelab-kubernetes/">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="HomeLab: Home Assistant VM - Non-root deployment on Fedora">
  <meta name="twitter:description" content="Home Assistant is an open-source platform for smart home automation. It integrates with a wide range of devices and services, and allows powerful automation logic — all running locally on your own hardware.
Home Assistant OS (HAOS) is the official operating system for running Home Assistant as a virtual appliance. It includes everything needed: supervisor, OS, and the Home Assistant core.
This guide shows how to run HAOS inside a KVM virtual machine using libvirt on Fedora without requiring sudo to manage the VM — after an initial root configuration.">

    <link rel="stylesheet" href="/my-blog/css/custom.css">
    <link rel="stylesheet" href="/my-blog/css/root.css">
    <link rel="stylesheet" href="/my-blog/css/bundle.css">

      <script src="/my-blog/js/copy-button.js"></script>
      <script src="/my-blog/js/bundle.js"></script><script defer src="/my-blog/js/search/flexsearch.compact.64594b125f7b78bdf4fa8316955922bbebb1cd6baef3f16654bfca20309f18f8.js" integrity="sha256-ZFlLEl97eL30&#43;oMWlVkiu&#43;uxzWuu8/FmVL/KIDCfGPg="></script>
<script defer src="/my-blog/js/search/search.9730b626c5ab6ac8769c6f6b6c61a2fc8fb5ca58d17402093a74330ed7bf1494.js" integrity="sha256-lzC2JsWrash2nG9rbGGi/I&#43;1yljRdAIJOnQzDte/FJQ="></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

</head>
<body class="notransition">
  <div id="container">
    <header id="main-header"><div role="navigation" aria-label="Main">
  <div class="nav-left">
    <a href="http://localhost:1313/my-blog/" style="color: inherit;">AK Blogs</a>
  </div>
  <div class="nav-right">
    <div style="position:absolute;width:0px;height:0px;">
      <div id="nav-dropdown-menu" class="hidden" href="#">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/my-blog/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a
      >Gallery</a>
    </div>
    <div class="nav-item">
      <a href="/my-blog/about/"
      >About</a>
    </div>
</div>
    </div>
    <a id="nav-dropdown-button" href="#"><svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
    <div id="nav-menu">
    <div class="nav-item">
      <a aria-current="true" class="ancestor" href="/my-blog/posts/"
      >Posts</a>
    </div>
    <div class="nav-item">
      <a
      >Gallery</a>
    </div>
    <div class="nav-item">
      <a href="/my-blog/about/"
      >About</a>
    </div>
</div>
    <a id="theme-switcher" href="#">
<svg class="light-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 3V4M12 20V21M4 12H3M6.31412 6.31412L5.5 5.5M17.6859 6.31412L18.5 5.5M6.31412 17.69L5.5 18.5001M17.6859 17.69L18.5 18.5001M21 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

<svg class="dark-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3.32031 11.6835C3.32031 16.6541 7.34975 20.6835 12.3203 20.6835C16.1075 20.6835 19.3483 18.3443 20.6768 15.032C19.6402 15.4486 18.5059 15.6834 17.3203 15.6834C12.3497 15.6834 8.32031 11.654 8.32031 6.68342C8.32031 5.50338 8.55165 4.36259 8.96453 3.32996C5.65605 4.66028 3.32031 7.89912 3.32031 11.6835Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</a>
  </div>
</div>
</header>
    <div class="flex grow">
      <div id="main-pane">
        <main id="main-content"><div class="single-header">
<ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/my-blog/">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content='1' />
    </li>
    <span>&nbsp»&nbsp</span>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="http://localhost:1313/my-blog/posts/">
        <span itemprop="name">Posts</span>
      </a>
      <meta itemprop="position" content='2' />
    </li>
    <span>&nbsp»&nbsp</span>
</ol>
<h1>HomeLab: Home Assistant VM - Non-root deployment on Fedora</h1><time class="dim" datetime="2025-08-04T23:55:00&#43;10:00">August 4, 2025</time><div class="term-container"><div class="tag">
        <a href="http://localhost:1313/my-blog/tags/homeassistant/">#homeassistant</a>
      </div><div class="tag">
        <a href="http://localhost:1313/my-blog/tags/libvirt/">#libvirt</a>
      </div><div class="tag">
        <a href="http://localhost:1313/my-blog/tags/fedora/">#fedora</a>
      </div></ol></div>
  <section class="page-section"><p><a href="https://www.home-assistant.io/">Home Assistant</a> is an open-source platform for smart home automation. It integrates with a wide range of devices and services, and allows powerful automation logic — all running locally on your own hardware.</p>
<p>Home Assistant OS (HAOS) is the official operating system for running Home Assistant as a virtual appliance. It includes everything needed: supervisor, OS, and the Home Assistant core.</p>
<p>This guide shows how to run HAOS inside a KVM virtual machine using <code>libvirt</code> on Fedora <strong>without requiring sudo</strong> to manage the VM — after an initial root configuration.</p>
<h3 id="why-run-haos-as-a-non-root-user">Why run HAOS as a non-root user?</h3>
<ul>
<li>Reduces attack surface and limits damage in case of misconfiguration</li>
<li>Lets you manage your smart home environment without admin rights</li>
<li>Enables easier automation and scripting without <code>sudo</code> prompts</li>
<li>Aligns with the principle of least privilege in homelab setups</li>
</ul>
<hr>
<h2 id="1-system-preparation">1. System Preparation</h2>
<p>Install required packages:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo dnf install -y <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  libvirt <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  qemu-kvm <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  virt-install <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  bridge-utils <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  wget <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  xz <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  python3-libvirt <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  virt-manager
</span></span></code></pre></div><p>Enable and start the <code>libvirtd</code> service:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl enable --now libvirtd
</span></span></code></pre></div><hr>
<h2 id="2-download-and-prepare-haos-image">2. Download and Prepare HAOS Image</h2>
<p>Find the latest HAOS releases here:<br>
<a href="https://github.com/home-assistant/operating-system/releases/">https://github.com/home-assistant/operating-system/releases/</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir haos <span style="color:#f92672">&amp;&amp;</span> cd haos
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>download_url<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://github.com/home-assistant/operating-system/releases/download/16.1.rc1/haos_ova-16.1.rc1.qcow2.xz&#34;</span>
</span></span><span style="display:flex;"><span>image_file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;haos_ova-16.1.rc1.qcow2.xz&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>wget <span style="color:#e6db74">&#34;</span>$download_url<span style="color:#e6db74">&#34;</span> -O <span style="color:#e6db74">&#34;</span>$image_file<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>xz -dk <span style="color:#e6db74">&#34;</span>$image_file<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><hr>
<h2 id="3-create-bridge0-network-interface">3. Create <code>bridge0</code> Network Interface</h2>
<p>To enable the VM to access your LAN via bridged networking, create a <code>bridge0</code> interface using <code>nmcli</code>.</p>
<ul>
<li>Bridge on WiFi is not supported.</li>
<li>Use Ethernet for bridge</li>
<li>Change <code>IFACE</code> variable accordingly</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Set your physical interface (e.g., enp3s0)</span>
</span></span><span style="display:flex;"><span>IFACE<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;enp3s0&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># See available devices</span>
</span></span><span style="display:flex;"><span>nmcli device status
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create bridge0</span>
</span></span><span style="display:flex;"><span>sudo nmcli connection add type bridge ifname bridge0 con-name bridge0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Set static IP, gateway, and DNS for the bridge</span>
</span></span><span style="display:flex;"><span>sudo nmcli connection modify bridge0 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  ipv4.method manual <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  ipv4.addresses 192.168.50.200/24 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  ipv4.gateway 192.168.50.100 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  ipv4.dns <span style="color:#e6db74">&#34;192.168.50.100 9.9.9.9 192.168.50.1&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  ipv6.method auto <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  bridge.stp no
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create and attach the physical interface as a bridge port</span>
</span></span><span style="display:flex;"><span>sudo nmcli connection add type ethernet ifname <span style="color:#e6db74">&#34;</span>$IFACE<span style="color:#e6db74">&#34;</span> con-name bridge0-slave <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  master bridge0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Bring up the connections</span>
</span></span><span style="display:flex;"><span>sudo nmcli connection up bridge0
</span></span><span style="display:flex;"><span>sudo nmcli connection up bridge0-slave
</span></span></code></pre></div><h3 id="31-allow-bridge0-in-qemu">3.1 Allow <code>bridge0</code> in QEMU</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo tee /etc/qemu/bridge.conf &gt; /dev/null <span style="color:#e6db74">&lt;&lt;&#39;EOL&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">allow bridge0
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOL</span>
</span></span></code></pre></div><hr>
<h2 id="4-grant-non-root-libvirt-access">4. Grant Non-Root Libvirt Access</h2>
<p>These steps are required so you can manage VMs without needing <code>sudo</code>.</p>
<h3 id="41-authorise-your-user-to-manage-libvirt">4.1 Authorise your user to manage libvirt</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo tee /etc/polkit-1/rules.d/50-libvirt.rules &gt; /dev/null <span style="color:#e6db74">&lt;&lt;EOL
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">polkit.addRule(function(action, subject) {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  if (action.id == &#34;org.libvirt.unix.manage&#34; &amp;&amp;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      subject.user == &#34;$USER&#34;) {
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    return polkit.Result.YES;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  }
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">});
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOL</span>
</span></span></code></pre></div><h3 id="42-add-user-to-libvirt-group">4.2 Add user to <code>libvirt</code> group</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo usermod -a -G libvirt $USER
</span></span><span style="display:flex;"><span>newgrp libvirt  <span style="color:#75715e"># Apply changes to current shell</span>
</span></span></code></pre></div><p>Verify:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>id -Gn
</span></span></code></pre></div><hr>
<h2 id="5-create-the-haos-vm">5. Create the HAOS VM</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>VM_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;haos&#34;</span>
</span></span><span style="display:flex;"><span>VM_MAC<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;52:54:00:12:34:60&#34;</span>
</span></span><span style="display:flex;"><span>VM_DISK<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/haos/</span><span style="color:#e6db74">${</span>image_file%.xz<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>virt-install <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --name <span style="color:#e6db74">&#34;</span>$VM_NAME<span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --description <span style="color:#e6db74">&#34;Home Assistant OS&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --os-variant generic <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --ram <span style="color:#ae81ff">3072</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --vcpus <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --disk path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$VM_DISK<span style="color:#e6db74">&#34;</span>,bus<span style="color:#f92672">=</span>scsi <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --controller type<span style="color:#f92672">=</span>scsi,model<span style="color:#f92672">=</span>virtio-scsi <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --import <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --graphics none <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --boot uefi <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --network bridge<span style="color:#f92672">=</span>bridge0,mac<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$VM_MAC<span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --noautoconsole
</span></span></code></pre></div><p>Enable autostart:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>virsh autostart haos
</span></span></code></pre></div><hr>
<h2 id="6-managing-the-vm-as-non-root">6. Managing the VM (as non-root)</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>virsh list
</span></span><span style="display:flex;"><span>virsh --connect qemu:///session list --all
</span></span><span style="display:flex;"><span>virsh --connect qemu:///system list --all
</span></span></code></pre></div><p>Check MAC address:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>virsh dumpxml haos | grep <span style="color:#e6db74">&#34;mac address&#34;</span> | awk -F<span style="color:#ae81ff">\&#39;</span> <span style="color:#e6db74">&#39;{ print $2 }&#39;</span>
</span></span></code></pre></div><p>Delete the VM:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>virsh destroy haos
</span></span><span style="display:flex;"><span>virsh undefine haos
</span></span></code></pre></div><hr>
<h2 id="7-backup-and-restore">7. Backup and Restore</h2>
<p>Fetch backups to your Mac:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>scp -r <span style="color:#e6db74">&#34;</span>$USER<span style="color:#e6db74">@192.168.50.100:/home/</span>$USER<span style="color:#e6db74">/haos/nfs/*&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  ~/Codes/homelab/home_assisstant/backups/
</span></span></code></pre></div><hr>
<h2 id="8-notes">8. Notes</h2>
<table>
  <thead>
      <tr>
          <th>Action</th>
          <th>Needs Sudo?</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Install packages</td>
          <td>✅ Yes</td>
      </tr>
      <tr>
          <td>Setup bridge/qemu policies</td>
          <td>✅ Yes</td>
      </tr>
      <tr>
          <td>VM create/operate via libvirt</td>
          <td>❌ No</td>
      </tr>
      <tr>
          <td>Use <code>virt-manager</code> GUI</td>
          <td>❌ No</td>
      </tr>
  </tbody>
</table>
<p>After one-time configuration, everything runs user-only.</p>
<hr>
<h2 id="9-related">9. Related</h2>
<ul>
<li><a href="https://github.com/home-assistant/operating-system/releases">Home Assistant OS Releases</a></li>
<li><a href="https://wiki.libvirt.org/page/SSHPolicyKitSetup">Libvirt Non-root Setup</a></li>
<li><a href="https://wiki.libvirt.org/page/Networking#Bridged_networking">Bridge Networking Guide</a></li>
</ul>
<hr>
<p><img src="https://images.unsplash.com/photo-1499744937866-d7e566a20a61?q=80&amp;w=2070&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.1.0&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx" alt="thank you"></p>
</section></main>
        <footer id="main-footer">
<script src="/my-blog/js/copy-button.min.4876b98121977026b3ce53c9cb225d818299becf2f6ba9c345fdfbc99911d6dd.js" integrity="sha256-SHa5gSGXcCazzlPJyyJdgYKZvs8va6nDRf37yZkR1t0="></script>
</footer>
      </div><aside id="side-pane" class="side-sticky"><div class="side-content">
      <h3>Please note</h3><p>Code blocks can be EDITED before you copy</p>
    </div><div class="side-details">
    <span>572 words</span>
    <span>4 - 5 minutes read</span><div class="side-details-taxonomy">
        <small>series: 
          <span class="details-taxonomy"><a href="http://localhost:1313/my-blog/series/homelab">homelab</a></span></small>
      </div><div class="side-details-taxonomy">
        <small>topics: 
          <span class="details-taxonomy"><a href="http://localhost:1313/my-blog/topics/"></a></span></small>
      </div></div><h3>Table Of Contents</h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#why-run-haos-as-a-non-root-user">Why run HAOS as a non-root user?</a></li>
      </ul>
    </li>
    <li><a href="#1-system-preparation">1. System Preparation</a></li>
    <li><a href="#2-download-and-prepare-haos-image">2. Download and Prepare HAOS Image</a></li>
    <li><a href="#3-create-bridge0-network-interface">3. Create <code>bridge0</code> Network Interface</a>
      <ul>
        <li><a href="#31-allow-bridge0-in-qemu">3.1 Allow <code>bridge0</code> in QEMU</a></li>
      </ul>
    </li>
    <li><a href="#4-grant-non-root-libvirt-access">4. Grant Non-Root Libvirt Access</a>
      <ul>
        <li><a href="#41-authorise-your-user-to-manage-libvirt">4.1 Authorise your user to manage libvirt</a></li>
        <li><a href="#42-add-user-to-libvirt-group">4.2 Add user to <code>libvirt</code> group</a></li>
      </ul>
    </li>
    <li><a href="#5-create-the-haos-vm">5. Create the HAOS VM</a></li>
    <li><a href="#6-managing-the-vm-as-non-root">6. Managing the VM (as non-root)</a></li>
    <li><a href="#7-backup-and-restore">7. Backup and Restore</a></li>
    <li><a href="#8-notes">8. Notes</a></li>
    <li><a href="#9-related">9. Related</a></li>
  </ul>
</nav><h3>Related</h3>
    <ul><li><a href="/my-blog/posts/homelab/ansible-fedora/">Homelab: Initial setup for a Fedora VM</a></li><li><a href="/my-blog/posts/kubernetes/k3s-install/">Kubernetes: Install K3s on Fedora</a></li></ul></aside></div>
  </div>
</body>
</html>
